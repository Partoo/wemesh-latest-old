webpackJsonp([6],{"DP/h":function(t,e,n){"use strict";var a=function(t){return n.e(0).then(function(){return t(n("JBQe"))}.bind(null,n)).catch(n.oe)},r=function(t){return n.e(0).then(function(){return t(n("GXnb"))}.bind(null,n)).catch(n.oe)},o=function(t){return n.e(0).then(function(){return t(n("zqQ0"))}.bind(null,n)).catch(n.oe)},u=function(t){return n.e(0).then(function(){return t(n("6gPj"))}.bind(null,n)).catch(n.oe)},c=function(t){return n.e(0).then(function(){return t(n("rm9j"))}.bind(null,n)).catch(n.oe)};e.a=[{path:"/home",component:function(){return n.e(2).then(n.bind(null,"1tB0"))},children:[{path:"/",name:"home",component:function(){return n.e(4).then(n.bind(null,"HXef"))},meta:{auth:!0,name:"控制面板"}},{path:"/wesite/category",name:"wesite_category",meta:{name:"微网站:分类管理"},component:a},{path:"/wesite/post",meta:{name:"微网站:文章管理"},component:r,children:[{path:"",name:"wesite_post_list",component:o,meta:{name:"微网站文章列表"}},{path:"edit/:id",name:"wesite_post_edit",component:u,meta:{name:"修改微网站文章"}}]},{path:"/wesite/menu",name:"wesite_menu",meta:{name:"微网站:菜单管理"},component:c}]},{path:"/login",name:"login",component:function(){return n.e(1).then(n.bind(null,"P7ry"))},meta:{guest:!0}},{path:"/register",name:"register",component:function(){return n.e(3).then(n.bind(null,"S2NW"))},meta:{guest:!0}},{path:"/",redirect:"/home"},{path:"/*",redirect:"/home"}]},EsLV:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],o={render:a,staticRenderFns:r};e.a=o},GRgx:function(t,e,n){"use strict";var a=n("Dufx"),r=n.n(a),o=n("IcnI"),u=n("sSws");r.a.sync(o.a,u.a)},IcnI:function(t,e,n){"use strict";var a=n("mqJJ"),r=n("EcfS"),o=n("HiYY"),u=(n.n(o),n("mUbh")),c=n("ukYY");a.default.use(r.a);var i={isLoading:!1,authenticated:!1,weather:{},account:{email:null,mobile:null,name:null,avatar:null,menus:null,last_login:null,last_ip:null,nickname:null,sex:null,wechat:null}},s={account:function(t){return t.account},weather:function(t){return t.weather}};e.a=new r.a.Store({state:i,actions:u,mutations:c,getters:s,strict:!1,plugins:[]})},Kkag:function(t,e,n){"use strict";function a(t){if(401===t.status)s.a.dispatch("refreshToken");else{if(200===t.status||201===t.status)return t.data;Object(l.MessageBox)({title:"错误提示：",message:t.data.message,type:"error",callback:function(t){window.location.reload()}})}}var r=n("UIuv"),o=n.n(r),u=n("mqJJ"),c=n("cZQX"),i=n.n(c),s=n("IcnI"),l=n("pGkV"),f=(n.n(l),document.head.querySelector('meta[name="csrf-token"]'));i.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",f?i.a.defaults.headers.common["X-CSRF-TOKEN"]=f.content:console.error("CSRF token not found!"),i.a.defaults.baseURL="http://wemesh.dev/api/v1",i.a.defaults.headers.common.Accept="application/json",i.a.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"},i.a.defaults.timeout=5e3;var m;i.a.interceptors.request.use(function(t){return s.a.dispatch("loading"),m=l.Loading.service({fullscreen:!0}),t},function(t){return m.close(),o.a.reject(t)}),i.a.interceptors.response.use(function(t){return m.close(),t},function(t){return m.close(),401===t.response.status&&s.a.dispatch("refreshToken"),s.a.dispatch("loaded"),o.a.resolve(t.response)}),e.a={post:function(t,e){return i()({method:"post",url:t,data:e}).then(function(t){return a(t)})},get:function(t,e){return i()({method:"get",url:t,params:e}).then(function(t){return a(t)})},put:function(t,e){return i()({method:"put",url:t,data:e}).then(function(t){return a(t)})},delete:function(t){return i()({method:"delete",url:t}).then(function(t){return a(t)})}},u.default.$http=i.a,Object.defineProperty(u.default.prototype,"$http",{get:function(){return i.a}})},M93x:function(t,e,n){"use strict";var a=n("fqt3"),r=n("EsLV"),o=n("+rOk"),u=o(a.a,r.a,!1,null,null,null);e.a=u.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("mqJJ"),r=n("M93x"),o=n("sSws"),u=(n("Kkag"),n("GRgx"),n("pGkV")),c=n.n(u),i=n("Xcu2"),s=(n.n(i),n("tfUm")),l=(n.n(s),n("IcnI"));l.a.dispatch("authCheck"),a.default.config.productionTip=!1,a.default.use(c.a),new a.default({el:"#app",router:o.a,store:l.a,render:function(t){return t(r.a)}})},Xcu2:function(t,e){},fqt3:function(t,e,n){"use strict";e.a={name:"wemesh",mounted:function(){this.$store.state.authenticated&&this.$store.dispatch("findUser")}}},mUbh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"loading",function(){return s}),n.d(e,"loaded",function(){return l}),n.d(e,"toggleIconSelector",function(){return f}),n.d(e,"authCheck",function(){return m}),n.d(e,"refreshToken",function(){return d}),n.d(e,"attemptLogin",function(){return h}),n.d(e,"logout",function(){return p}),n.d(e,"findUser",function(){return g});var a=n("Hmpo"),r=n.n(a),o=n("vYJH"),u=n.n(o),c=n("Kkag"),i=this,s=function(t){(0,t.commit)("REQUEST_BEGIN")},l=function(t){(0,t.commit)("REQUEST_DONE")},f=function(t){(0,t.commit)("ICON_SELECTOR_TOGGLED")},m=function(t){(0,t.commit)("AUTH_CHECK")},d=function(t){(0,t.commit)("REFRESH_TOKEN")},h=function(){var t=u()(r.a.mark(function t(e,n){var a,o=e.commit;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("auth",n);case 2:a=t.sent,null!=a&&o("LOGIN",a);case 4:case"end":return t.stop()}},t,i)}));return function(e,n){return t.apply(this,arguments)}}(),p=function(t){(0,t.commit)("LOGOUT")},g=function(){var t=u()(r.a.mark(function t(e){var n,a=e.commit;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.get("account",{include:"menu"});case 2:n=t.sent,null!=n&&a("FIND_USER",n);case 4:case"end":return t.stop()}},t,i)}));return function(e){return t.apply(this,arguments)}}()},sSws:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var a=n("mqJJ"),r=n("1eSk"),o=n("DP/h"),u=n("IcnI");a.default.use(r.a);var c=new r.a({routes:o.a});c.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.auth})&&!u.a.state.authenticated?n({name:"login"}):t.matched.some(function(t){return t.meta.guest})&&u.a.state.authenticated?n({name:"home"}):n()}),a.default.router=c},tfUm:function(t,e){},ukYY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"REQUEST_BEGIN",function(){return o}),n.d(e,"REQUEST_DONE",function(){return u}),n.d(e,"ICON_SELECTOR_TOGGLED",function(){return c}),n.d(e,"REFRESH_TOKEN",function(){return i}),n.d(e,"AUTH_CHECK",function(){return s}),n.d(e,"LOGIN",function(){return l}),n.d(e,"LOGOUT",function(){return f}),n.d(e,"FIND_USER",function(){return m});var a=n("mqJJ"),r=this,o=function(t){return!0===t.loading},u=function(t){return!1===t.loading},c=function(t){t.showIcons=!t.showIcons},i=function(t,e){null==e?(r.LOGOUT(t),a.default.router.replace({name:"login"})):(t.authenticated=!0,localStorage.setItem("star_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),a.default.$http.defaults.headers.common.Authorization="Bearer "+e.access_token)},s=function(t){var e=localStorage.getItem("star_token");t.authenticated=!!e,t.authenticated&&(a.default.$http.defaults.headers.common.Authorization="Bearer "+e)},l=function(t,e){t.authenticated=!0,localStorage.setItem("star_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),a.default.$http.defaults.headers.common.Authorization="Bearer "+e.access_token,a.default.router.push({path:"home"})},f=function(t){t.authenticated=!1,localStorage.removeItem("star_token"),localStorage.removeItem("refresh_token"),a.default.$http.defaults.headers.common.Authorization="",a.default.router.replace({name:"login"})},m=function(t,e){var n=e.data;t.account.email=n.email,t.account.mobile=n.mobile,t.account.name=n.name,t.account.avatar=n.avatar,t.account.last_login=n.last_login,t.account.last_ip=n.last_ip,t.account.nickname=n.nickname,t.account.sex=n.sex,t.account.wechat=n.wechat,t.account.menus=n.menus}}},["NHnr"]);
//# sourceMappingURL=app.71df387898f33b5968f2.js.map