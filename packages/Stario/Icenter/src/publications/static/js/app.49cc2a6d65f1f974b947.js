webpackJsonp([4],{"/hsz":function(t,e,n){"use strict";var a=n("cKSt"),r=n("5AB7"),i=n("VkTP"),u=n("g8Jr");e.a={namespaced:!0,actions:a.a,getters:r.a,mutations:i.a,state:u.a}},"/yCD":function(t,e,n){"use strict";var a,r=n("bOdI"),i=n.n(r),u=n("33rN");e.a=(a={},i()(a,u.a,function(t){t.isLoading=!0}),i()(a,u.b,function(t){t.isLoading=!1}),a)},"1AQK":function(t,e,n){"use strict";var a=n("Zx67"),r=n.n(a),i=n("Zrlr"),u=n.n(i),o=n("wxAW"),s=n.n(o),c=n("zwoO"),f=n.n(c),d=n("Pf15"),m=n.n(d),l=n("dP9K"),h=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u()(this,e),f()(this,(e.__proto__||r()(e)).call(this,"auth",t))}return m()(e,t),s()(e,[{key:"login",value:function(t){var e=t.username,n=t.password,a={username:e,password:n};return this.submit("post",""+this.endpoint,a)}},{key:"register",value:function(t){return this.submit("post",this.endpoint+"/register",t)}}]),e}(l.a);e.a=h},"33rN":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r});var a="REQUEST_BEGIN",r="REQUEST_DONE"},"5AB7":function(t,e,n){"use strict";e.a={}},CZ0x:function(t,e,n){"use strict";var a=n("fHbC"),r=n("iwwM"),i=n("m3mU"),u=n("MACa");e.a={namespaced:!0,actions:a.a,getters:r.a,mutations:i.a,state:u.a}},"DP/h":function(t,e,n){"use strict";e.a=[{path:"/home",name:"home",component:function(){return n.e(1).then(n.bind(null,"Paco"))},meta:{auth:!0}},{path:"/login",name:"login",component:function(){return n.e(0).then(n.bind(null,"P7ry"))},meta:{guest:!0}},{path:"/register",name:"register",component:function(){return n.e(2).then(n.bind(null,"S2NW"))},meta:{guest:!0}},{path:"/",redirect:"/home"},{path:"/*",redirect:"/home"}]},EnFR:function(t,e){},GRgx:function(t,e,n){"use strict";var a=n("9JMe"),r=n.n(a),i=n("IcnI"),u=n("sSws");r.a.sync(i.a,u.a)},IcnI:function(t,e,n){"use strict";var a=n("/5sW"),r=n("NYxO"),i=n("sax8"),u=(n.n(i),n("/hsz")),o=n("CZ0x"),s=n("QBKE");a.default.use(r.a);e.a=new r.a.Store({modules:{account:u.a,auth:o.a,loading:s.a},strict:!1,plugins:[]})},Kkag:function(t,e,n){"use strict";var a=n("//Fk"),r=n.n(a),i=n("/5sW"),u=n("mtWM"),o=n.n(u),s=n("IcnI"),c=n("zL8q"),f=(n.n(c),document.head.querySelector('meta[name="csrf-token"]'));o.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",f?o.a.defaults.headers.common["X-CSRF-TOKEN"]=f.content:console.error("CSRF token not found!"),o.a.defaults.baseURL="http://wemesh.cn/api/v1",o.a.defaults.headers.common.Accept="application/json",o.a.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"},o.a.defaults.timeout=5e3;var d;o.a.interceptors.request.use(function(t){return s.a.dispatch("loading/loading"),d=c.Loading.service({fullscreen:!0}),t},function(t){return d.close(),r.a.reject(t)}),o.a.interceptors.response.use(function(t){return d.close(),t},function(t){return d.close(),401===t.response.status&&s.a.dispatch("loading/loaded"),s.a.dispatch("loading/loaded"),r.a.reject(t)}),i.default.$http=o.a,Object.defineProperty(i.default.prototype,"$http",{get:function(){return o.a}})},M0FW:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"d",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return u});var a="CHECK",r="REGISTER",i="LOGIN",u="LOGOUT"},M93x:function(t,e,n){"use strict";var a=n("xJD8"),r=n("WgIE"),i=n("VU/8"),u=i(a.a,r.a,null,null,null);e.a=u.exports},MACa:function(t,e,n){"use strict";e.a={authenticated:!1}},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("/5sW"),r=n("M93x"),i=n("sSws"),u=(n("Kkag"),n("GRgx"),n("EnFR")),o=(n.n(u),n("tfUm")),s=(n.n(o),n("IcnI"));s.a.dispatch("auth/check"),a.default.config.productionTip=!1,new a.default({el:"#app",router:i.a,store:s.a,render:function(t){return t(r.a)}})},Pypz:function(t,e,n){"use strict";e.a={isLoading:!1}},QBKE:function(t,e,n){"use strict";var a=n("/yCD"),r=n("Pypz"),i=n("eav5");e.a={namespaced:!0,mutations:a.a,state:r.a,actions:i.a}},VkTP:function(t,e,n){"use strict";var a=n("bOdI"),r=n.n(a),i=n("Xrs4");e.a=r()({},i.a,function(t,e){t.email=e.email,t.firstName=e.firstName,t.lastName=e.lastName})},WgIE:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],i={render:a,staticRenderFns:r};e.a=i},Xrs4:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a="FIND"},cKSt:function(t,e,n){"use strict";var a=n("Xrs4"),r=n("yuhg"),i=n("zL8q"),u=(n.n(i),function(t){var e=t.commit;(new r.a).me().then(function(t){window.console.log(t),e(a.a,t)}).catch(function(t){Object(i.MessageBox)({type:"error",message:t.message})})});e.a={find:u}},dP9K:function(t,e,n){"use strict";var a=n("//Fk"),r=n.n(a),i=n("fZjL"),u=n.n(i),o=n("Zrlr"),s=n.n(o),c=n("wxAW"),f=n.n(c),d=n("/5sW"),m=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s()(this,t),this.endpoint=e,this.parameters=n}return f()(t,[{key:"setParameters",value:function(t){var e=this;return u()(t).forEach(function(n){e.parameters[n]=t[n]}),this}},{key:"setParameter",value:function(t,e){return this.parameters[t]=e,this}},{key:"removeParameters",value:function(t){var e=this;return t.forEach(function(t){delete e.parameters[t]}),this}},{key:"removeParameter",value:function(t){return delete this.parameters[t],this}},{key:"submit",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new r.a(function(r,i){d.default.$http[t](e+n.getParameterString(),a).then(function(t){r(t.data)}).catch(function(t){var e=t.response;i(e?e.data:new Error("无法获取响应，请联系管理员"))})})}},{key:"all",value:function(){return this.submit("get","/"+this.endpoint)}},{key:"find",value:function(t){return this.submit("get","/"+this.endpoint+"/"+t)}},{key:"create",value:function(t){return this.submit("post","/"+this.endpoint,t)}},{key:"update",value:function(t,e){return this.submit("put","/"+this.endpoint+"/"+t,e)}},{key:"destroy",value:function(t){return this.submit("delete","/"+this.endpoint+"/"+t)}},{key:"getParameterString",value:function(){var t=this,e=u()(this.parameters),n=e.filter(function(e){return!!t.parameters[e]}).map(function(e){return e+"="+t.parameters[e]});return 0===n.length?"":"?"+n.join("&")}}]),t}();e.a=m},eav5:function(t,e,n){"use strict";var a=n("33rN"),r=function(t){(0,t.commit)(a.a)},i=function(t){(0,t.commit)(a.b)};e.a={loading:r,loaded:i}},fHbC:function(t,e,n){"use strict";var a=n("/5sW"),r=n("IcnI"),i=n("1AQK"),u=n("M0FW"),o=n("zL8q"),s=(n.n(o),function(t){(0,t.commit)(u.a)}),c=function(t){(0,t.commit)(u.b,"RandomGeneratedToken"),a.default.router.push({name:"home"})},f=function(t,e){var n=t.commit;(new i.a).login(e).then(function(t){n(u.b,t),r.a.dispatch("account/find"),a.default.router.push({name:"home"})}).catch(function(t){Object(o.MessageBox)({type:"error",message:t.message})})},d=function(t){(0,t.commit)(u.c),a.default.router.replace({name:"login"})};e.a={check:s,register:c,login:f,logout:d}},g8Jr:function(t,e,n){"use strict";e.a={email:null,firstName:null,lastName:null}},iwwM:function(t,e,n){"use strict";e.a={}},m3mU:function(t,e,n){"use strict";var a,r=n("bOdI"),i=n.n(r),u=n("mvHQ"),o=n.n(u),s=n("/5sW"),c=n("M0FW");e.a=(a={},i()(a,c.a,function(t){if(t.authenticated=!!localStorage.getItem("star_token"),t.authenticated){var e=JSON.parse(localStorage.getItem("star_token"));s.default.$http.defaults.headers.common.Authorization="Bearer "+e.access_token}}),i()(a,c.d,function(){}),i()(a,c.b,function(t,e){t.authenticated=!0,localStorage.setItem("star_token",o()(e)),s.default.$http.defaults.headers.common.Authorization="Bearer "+e.access_token}),i()(a,c.c,function(t){t.authenticated=!1,localStorage.removeItem("star_token"),s.default.$http.defaults.headers.common.Authorization=""}),a)},sSws:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var a=n("/5sW"),r=n("/ocq"),i=n("DP/h"),u=n("IcnI");a.default.use(r.a);var o=new r.a({routes:i.a});o.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.auth})&&!u.a.state.auth.authenticated?n({name:"login"}):t.matched.some(function(t){return t.meta.guest})&&u.a.state.auth.authenticated?n({name:"home"}):n()}),a.default.router=o},tfUm:function(t,e){},xJD8:function(t,e,n){"use strict";e.a={name:"wemesh",mounted:function(){this.$store.state.auth.authenticated&&this.$store.dispatch("account/find")}}},yuhg:function(t,e,n){"use strict";var a=n("Zx67"),r=n.n(a),i=n("Zrlr"),u=n.n(i),o=n("wxAW"),s=n.n(o),c=n("zwoO"),f=n.n(c),d=n("Pf15"),m=n.n(d),l=n("dP9K"),h=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u()(this,e),f()(this,(e.__proto__||r()(e)).call(this,"account",t))}return m()(e,t),s()(e,[{key:"me",value:function(){return this.submit("get","/"+this.endpoint+"/")}}]),e}(l.a);e.a=h}},["NHnr"]);
//# sourceMappingURL=app.49cc2a6d65f1f974b947.js.map